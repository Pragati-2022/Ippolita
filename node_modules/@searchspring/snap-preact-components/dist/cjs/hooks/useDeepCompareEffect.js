"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useDeepCompareEffect = exports.useDeepCompareMemoize = void 0;
var hooks_1 = require("preact/hooks");
var dequal_1 = require("dequal");
function useDeepCompareMemoize(value) {
    var ref = (0, hooks_1.useRef)(value);
    var signalRef = (0, hooks_1.useRef)(0);
    if (!(0, dequal_1.dequal)(value, ref.current)) {
        ref.current = value;
        signalRef.current += 1;
    }
    return (0, hooks_1.useMemo)(function () { return ref.current; }, [signalRef.current]);
}
exports.useDeepCompareMemoize = useDeepCompareMemoize;
function useDeepCompareEffect(callback, dependencies) {
    return (0, hooks_1.useEffect)(callback, [useDeepCompareMemoize(dependencies)]);
}
exports.useDeepCompareEffect = useDeepCompareEffect;
